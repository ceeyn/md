



![截屏2022-10-27 10.04.15](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-27 10.04.15.png)



![截屏2022-10-27 10.05.09](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-27 10.05.09.png)

![截屏2022-10-27 10.05.46](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-27 10.05.46.png)

![截屏2022-10-27 10.07.01](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-27 10.07.01.png)



![截屏2022-10-27 20.57.26](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-27 20.57.26.png)



![截屏2022-10-27 21.06.39](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-27 21.06.39.png)



### 设置静态资源映射

```java
@Slf4j
@Configuration
public class WebMvcConfig extends WebMvcConfigurationSupport {

    /**
     * 设置静态资源映射
     * @param registry
     */
    @Override
    protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        log.info("开始静态资源映射....");
        registry.addResourceHandler("/backend/**").addResourceLocations("classpath:/backend/");
        registry.addResourceHandler("/front/**").addResourceLocations("classpath:/front/");
    }
}

```



### 后台登录

![截屏2022-10-30 10.11.24](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-30 10.11.24.png)





### 后台登出

![截屏2022-10-30 10.13.12](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-30 10.13.12.png)

**后台在登录登出的时候，前端也会相应的保存或删除用户信息**





### 过滤器



![截屏2022-10-30 10.15.55](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-30 10.15.55.png)



![截屏2022-10-30 10.16.37](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-30 10.16.37.png)





![截屏2022-10-30 10.18.13](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-30 10.18.13.png)

```java
@Slf4j
@WebFilter(filterName = "loginCheckFilter", urlPatterns = "/*")
public class LoginCheckFilter implements Filter {
    // 路径匹配器支持通配符
    public static final AntPathMatcher PATH_MATCHER = new AntPathMatcher();

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) servletRequest;
        HttpServletResponse response = (HttpServletResponse) servletResponse;
//        log.info("拦截到请求:{}",request.getRequestURI());
//        filterChain.doFilter(request,response);

        // 1.获取请求路径
        String requestURI = request.getRequestURI();
        log.info("拦截到请求:{}",request.getRequestURI());

        // 2.定义不需要的请求路径
        String[] urls = new String[] {
                "/employee/login",
                "/employee/logout",
                "/backend/**",
                "/front/**"
        };

        // 3.判断此次请求是否需要拦截
        boolean check = match(urls,requestURI);

        // 4.如果不需要处理，则直接放行
        if (check) {
            filterChain.doFilter(request, response);
            log.info("请求不需要处理{}",request.getRequestURI());
            return;
        }

        // 5.判断登录状态，已登录则放行
        if(request.getSession().getAttribute("employee") != null) {
            log.info("用户名{}",request.getSession().getAttribute("employee"));
            filterChain.doFilter(request, response);
            return;
        }

        // 6.未登录则返回未登录结果,通过输出流的方式向客户端页面响应数据

        response.getWriter().write(JSON.toJSONString(R.error("NOTLOGIN")));
        return;


    }

    public boolean match(String[] urls, String requestURI) {
       for(String url: urls){
           boolean match = PATH_MATCHER.match(url, requestURI);
           if (match) return true;

       }

       return false;

    }

}

```



### 全局异常捕获

![截屏2022-10-30 10.55.32](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-10-30 10.55.32.png)







![截屏2022-11-03 11.23.06](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 11.23.06.png)





![截屏2022-11-03 11.23.27](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 11.23.27.png)







![截屏2022-11-03 12.09.35](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 12.09.35.png)





![截屏2022-11-03 12.20.00](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 12.20.00.png)







![截屏2022-11-03 17.03.50](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 17.03.50.png)





![截屏2022-11-03 17.05.57](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 17.05.57.png)

![截屏2022-11-03 17.07.38](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 17.07.38.png)







![截屏2022-11-03 20.06.00](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 20.06.00.png)



![截屏2022-11-03 20.13.29](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-03 20.13.29.png)





![截屏2022-11-05 11.32.49](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-05 11.32.49.png)

 



![截屏2022-11-05 11.34.34](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-05 11.34.34.png)





![截屏2022-11-05 11.37.03](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-05 11.37.03.png)



![截屏2022-11-06 18.23.34](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-06 18.23.34.png)



**第一次请求其它分页数据，第二次请求每次分页数据所带的图片**

![截屏2022-11-06 21.17.14](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-06 21.17.14.png)





![截屏2022-11-09 16.55.31](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-09 16.55.31.png)





![截屏2022-11-09 21.54.14](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-09 21.54.14.png)





![截屏2022-11-13 16.50.00](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 16.50.00.png)





![截屏2022-11-13 16.53.34](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 16.53.34.png)

 



![截屏2022-11-13 17.01.13](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 17.01.13.png)





![截屏2022-11-13 17.06.49](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 17.06.49.png)





![截屏2022-11-13 17.09.18](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 17.09.18.png)





![截屏2022-11-13 18.23.39](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 18.23.39.png)





![截屏2022-11-13 18.25.53](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-11-13 18.25.53.png)

```
eyJhbGciOiJIUzUxMiJ9.eyJ1c2VyTmFtZSI6ImFkbWluMTIzIiwiZXhwIjoxNjgxMDczNzc2fQ.VrlLap2AmV0PZNZL1l6eXrf2_moIBfVaSTFjSULBDZ0uvT2CSS4X2El_MWGLA0GOf2_GFBKFZU3yRRsEXQuiQ
```
