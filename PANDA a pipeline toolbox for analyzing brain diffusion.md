



# PANDA a pipeline toolbox for analyzing brain diffusion

各向异性分数(*FA*)、平均弥散值(*MD*)、轴向弥散值(*AD*)和径向弥散值(RD)



弥散磁共振成像(DMRI)在人脑活体研究中广泛应用于科学研究和临床实践。
虽然已经开发了一些后处理程序包，但dMRI数据集的完全自动化处理仍然具有挑战性。
在这里，我们开发了一个用于**【全自动脑扩散图像处理的工具箱，名为“脑扩散图像分析管道”(PANDA)。】定义**
已建立的几个软件包的处理模块，包括FMRIB软件库(FSL)、Octave和MatLab的管道系统(PSOM)、DiffusionToolkit和MRIcron在熊猫身上得到了应用。
**【使用来自不同对象的任意数量的原始dMRI数据集，PANDA可以自动执行一系列步骤来处理DICOM/NIFTI到扩散度量[例如，分数各向异性(FA)和平均扩散系数(MD)]，这些度量准备好在体素级别、图谱级别和基于区域的空间统计(TBSS)级别进行统计分析，并且可以完成所有对象的解剖脑网络的构建。】定义**
特别是，**【Panda可以在一台计算机上或在分布式计算环境中使用多个内核来并行处理不同的主题，从而大大减少了处理大量数据集的时间成本。】环境**
此外，Panda具有友好的图形用户界面(GUI)，允许用户进行交互并调整输入/输出设置以及处理参数。
作为一个开源包，Panda可以在http://www.nitrc.org/projects/panda/.上免费获得。
这个新的工具箱有望大大简化dMRI数据集的图像处理，并促进人类结构连接组的研究



弥散磁共振成像(DMRI)已成为脑研究中最常用的MRI技术之一。
DMRI可以用来量化脑白质(WM)的性质和虚拟重建活脑中的WM通路(Le Bihan，2003)。由于其独特的优点，dMRI已被广泛应用于正常和异常情况下的WM连通性的研究，使我们对WM的作用有了实质性的了解(Johansen-Bergand Rushworth，2009)。**dMRI的一个广泛应用是提取各种公认的反映WM完整性的扩散指标[如分数各向异性(FA)和平均扩散系数(MD)](Basser和Pierpaoli，1996；Pierpaoli和Basser，1996；Beaulieu，2002)。**
这些测量可以进一步应用于识别不同受试者的WM完整性的差异。
要进行这种类型的分析，需要多个连续的图像处理步骤(例如涡流校正、张量计算、度量计算和归一化)。目前，许多软件包，如FMRIB软件库(FSL)(Smith等人，2004)和DTI-Studio(酱等人，2006)提供了一组可以执行这些工作的功能。
但是，这些包通常按步骤和主题执行处理。
显然，这种处理模式是无效的，**因为用户必须等到前面的步骤或每个主题完全完成后才能启动下一个步骤主题。**
此外，这种模式需要大量的手动操作，这潜在地增加了处理由手动错误引起的错误的可能性。
到目前为止，支持对原始dMRI数据集进行**【全自动处理的工具箱仍然缺乏】相同点**，以便于统计分析的扩散指标。dMRI的另一个流行应用是虚拟重建WM束，称为扩散束造影术(Moriet等人，1999；Behrens等人，2007)。
以往基于扩散束成像的研究主要集中在几个特定的WM束上，最近，基于扩散束成像的精确构建完整的大脑解剖网络(即连接体)引起了人们的极大关注(Behrens和Sporns，2012)，也是正在进行的人类连接体计划(http://humanconnectome.org/).)的关键目标。
虽然构建人脑解剖网络的框架(即，网络节点和边缘的定义)已经建立(Hagmann等人，2008年；
目前，已经有一些软件包，如MIPAV(McAuliffe et al.，2001)、JIST(Lucas et al.，2010)、Nipype(GorGolewski et.，2011)和Loni(Dinov et al.，2009)，以促进神经成像数据集的自动化处理





本质上，这些包提供了构建分析工作流的环境，其中带有来自现有工具(例如，Camino、FSL、Afni、Freesurfer和SPM)的许多预先包含的处理模块，因此可以在这些环境中开发各种自动化处理流水线(例如，dMRI处理流水线)。
为了构建带有这些包的管道，用户需要选择处理模块，并自行定义依赖项和参数。
需要指出的是，**如果没有封装特定的处理模块[例如，JIST不包括基于区域的空间统计(TBSS)分析]，用户必须开发自己的模块，并进一步将其添加到环境中。**
虽然这些强大而复杂的包使生成dMRI处理管道成为可能，但它们受到开发人员的青睐，不会吸引没有编程技能的用户。
特别是对于终端用户来说，非常需要一种用于dMRI处理的现成的管线醇





在这里，我们提出了一个名为PANDA(一种用于分析脑扩散图像的管道)的MATLAB工具箱，用于dMRI数据集的综合流水线处理，旨在促进图像处理，**【用于跨主题的扩散度量分析和脑网络结构的构建。】目的**
值得注意的是，这个工具箱中的处理管道已经完全设置好，允许dMRI的最终用户立即处理数据。
此外，这条管道内的加工程序经过精心设计，以尽可能遵循建议的做法(Jones等人，2012年)。
在用户通过友好的图形用户界面(GUI)设置输入/输出和处理参数后，PANDA完全自动匹配任意数量的受试者数据集的所有处理步骤，并产生与许多扩散指标相关的数据，这些数据可用于**三个级别(体素级别、ROI级别和TBSS级别)的统计分析。**
此外，**解剖脑网络可以使用确定性或概率性脑束成像技术自动生成。**
特别是，Panda可以在一台计算机上或在使用太阳网格引擎的分布式计算环境中**并行运行多个核心的处理作业，从而允许最大限度地利用可用的计算资源。**为了评估Panda的可用性和有效性，我们应用PANDA来研究dif-fusionmetricsofWMaswellasthetopologicalpropertiesofthe WM网络中的年龄效应(即年龄效应)。
根据先前的发现，老年人的WM各向同性降低，网络效率减弱。





Panda是在Ubuntuo操作系统下用MatLab开发的。
Panda调用了来自FSL(Smith等人，2004年)、Octave和MatLab的管道系统(PSOM)(Bellec等人，2012年)、扩散工具包(Wanget等人，2007年)和MRIcron(http://www.mccauslandcenter.sc.edu/mricro/mricron/)的许多处理函数。
在这里，我们将描述PANDA中的流水线处理过程，然后介绍流水线的实现。PANDA处理过程如图1所示。**【PANDA的主要过程包括三个步骤：(1)预处理；(2)产生扩散度量(准备好进行统计分析)；(3)构建网络。】步骤**预处理将DICOM文件转换为NIFTI图像。**【PANDA的输入文件可以是DICOM或NIFTI格式。】输入文件**
如果输入文件为Nifti格式，则跳过此转换步骤。否则，在此步骤中，DICOM文件将被转换为Nifti格式。
嵌入在MRIcron中的dcm2niitool完成了这项任务。估计大脑面具。这一步骤通过使用FSL的Bett命令产生大脑面具(Smith，2002)。
脑掩膜是后续处理步骤所必需的。
该方法采用无扩散加权的b0图像进行估计，对原始图像进行裁剪，为了减少存储开销和加速后续处理，我们在原始图像中去掉了非脑空间，从而减小了图像的大小。
获得的大脑面具被用来确定大脑沿三个维度的边界。
然后利用FSL的特征去除非脑间隙。校正涡流效应。涡流引起的弥散加权图像(DWI)失真以及扫描过程中简单的头部运动可以通过仿射变换将DW图像配准到b0图像来校正。
值得注意的是，这一配准程序适用于所有图像，如果扫描了多个DWI采集，则使用第一次采集的b0图像作为目标。
值得一提的是，虽然这里没有调用FSL的eddy_right命令，但此步骤的结果与ddy_right的输出完全相同。
基本上，Panda只是将4D文件(输入文件feddy_right)分割成多个3D文件，然后执行仿射配准，就像eddy_right一样。
这种实现的目的是为了避免在4D文件大小很大时对内存的巨大需求。
最后，根据生成的仿射变换旋转每个DWI体积的梯度方向(Leemans和Jones，2009)

平均多次采集。如果只有一次DWI采集，则将跳过此步骤。
否则，在涡流校正后，通过调用FSL的fslmaths命令来平均排列的倍数DWI。计算扩散张量(DT)指标。这一步骤涉及张量矩阵和DT指标的矢量计算，包括FA、MD、轴向扩散系数(AD)和径向扩散系数(RD)(Pierpaoli和Basser，1996；Song等，2002)。
应用了FSL的dtifit命令。产生了可用于统计分析的扩散指标标准化。为了允许跨受试者比较，必须建立位置对应关系。
为了结束这一点，总是应用将所有单独的图像配准到标准化模板。
在这里，大熊猫非线性注册个人通过调用FSL的fnirt命令，将本地空间的FA映像复制到MNI空间中的FA模板。
然后使用产生的翘曲变换将扩散度量(即FA、MD、AD和RD)的图像以定制的空间分辨率(例如，1×1×1 mm或2×2×2 mm)重采样到MNI空间。
这个重采样步骤是通过应用FSL的warp命令来实现的。输出用于基于体素的分析。标准空间中的不同融合度量的结果图像准备用于基于体素的统计分析。
然而，在基于体素的分析框架中，**这些图像通常会在一定程度上进行平滑，这可以减少图像噪声和对象之间的不对准的影响。**
相应地，熊猫用给定的高斯核对图像进行平滑，这是通过调用FSL的fslmaths命令实现的。
平滑的扩散度量图像然后可以直接用于具有任何优选工具的基于体素的统计分析，例如FSL(http://www.fmrib.ox.ac.uk/fsl/)，SPM(http://www.fil.ion.ucl.ac.uk/spm/)，)或AFNI(用于基于图谱的分析的http://afni.nimh.nih.gov/afni/).Output)。除了流行的基于体素的分析方法之外，可以在感兴趣区域(ROI)的级别上分析扩散度量，
最近，提出了一些WM图集(例如，ICBM-DTI-81 WM标签图集和JHU WM示踪图集)(Mori等人，2008年)。
这些标准空间中的WM地图集。



Cui等人的扩散MRI流水线允许将整个WM分割成多个ROI，每个ROI表示图集中的标记区域。
为了支持基于ROI的分析，Panda通过平均WM地图集每个区域中的值来计算区域扩散度量(即FA、MD、AD和RD)。
这些基于感兴趣区的数据(保存为文本文件)可以使用SPSS、(http://www-01.ibm.com/software/analytics/spss/)和其他统计软件包进行统计分析。输出用于基于体素的分析。
为了支持这种类型的分析，PANDA遵循标准的TBSS框架。
首先，对所有对齐的FA图像进行平均化，得到平均的FA骨架。
其次，将个体的扩散度量数据投影到骨架上。
最后，创建了包含骨架数据的单独图像。
生成的图像可以直接用于骨骼的体素统计分析。
这里使用了fsl的fslmathandtbss_skone命令。构建网络一个网络需要两个基本元素：一个节点和一个连接。
因此，**构建大脑网络的中心任务是：(1)定义网络节点和(2)定义节点之间的连接。**
典型的情况是，使用先前的灰质(GM)图谱将整个大脑划分为多个区域，其中每个区域代表一个网络节点(Bullmore和Sporns，2009)。
然而，**先前的地图集通常定义在标准空间中，并且需要被转换到每个个体的原始dMRI空间。**
为了解决这个问题，Panda使用了框架



**应用扩散束成像构建大熊猫解剖脑网络的流程图。**
**(A)用确定性纤维束造影术重建的白质束。(B)弥散空间中灰质的分离。**
**每种颜色表示脑网络中的一个节点。(C)使用FSL概率示踪的白质连通性图。(D)按纤维数、平均长度和平均FA加权的三个结果网络矩阵。(E)按连接概率加权的网络矩阵**

![截屏2022-09-20 09.16.40](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-09-20 09.16.40.png)



由Gong等人提出(2009a)。
具体地，利用仿射变换将自然空间中的单个FAI图像与其对应的结构图像(即T1加权)共同配准，然后将单个结构图像非线性配准到ICBM152模板。
基于这两个步骤中得到的变换，可以得到从标准空间到原始dMRI空间的逆扭曲变换，然后通过应用该逆变换将标准空间中的先前图谱逆扭曲回单个自然空间。
目前，Panda提供了两个定义明确的地图集：自动解剖标记地图集(Tzourio-Mazoyer等，2002)和哈佛-牛津地图集(HOA)(http://www.cma.mgh.harvard.edu/fslatlas.html).。
**值得注意的是，用户可以将定制的地图集输入到PANDA中来定义网络节点。在这一步骤中，使用FSL的FIRTT、FNIRT、INWARP和APPLY WARP命令。使用确定性轨迹图构建网络。在一般情况下，确定性轨迹图假定跟踪过程中每个位置都有确定性的纤维取向，通常得到重建的WM轨迹的3D轨迹。**
这里，调用扩散工具包(http://trackvis.org/dtk/))的dti_reconr和dti_tracker命令，通过从所有WM体素播种来重建大脑内所有可能的纤维。
在上面定义的每一对大脑节点/区域中，位于各自掩膜中的两个端点的纤维被认为连接两个节点。
基于连接纤维，熊猫计算了三个基本的加权矩阵：数字加权矩阵(MN)、FA加权矩阵(MFA)和长度加权矩阵(ML)。
元素M(i，j)N、M(i，j)FA和M(i，j)L分别代表节点和节点j之间连接纤维的数量、平均FA和平均长度。
结果矩阵被保存为MATLAB数据文件，并可直接用于图论方法的拓扑分析(Bullmore和Sporns，2009；Bullmore和Bassett，2011)。

**使用概率跟踪图构建网络。相反，概率跟踪图通常会多次运行跟踪程序，并以概率方式确定纤维方向。**
**这种类型的纤维束造影术可以提高跟踪灵敏度，特别是对非主导纤维。**
**Behrens等人(2003,2007)提出的概率跟踪图已在FSL中实现，并被熊猫称为组网。**
**该过程包括以下两个步骤：BedpostX。**
**使用马尔可夫链蒙特卡罗采样技术，该模块估计了每个体素上纤维方向的局部概率分布，这是运行后续概率纤维束成像的前提(Behrens等人，2003年)。**
**在PANDA中，BedpostX是通过调用FSL的光纤命令来实现的。概率纤维束成像和网络构建。**
**简而言之，对于每个确定的大脑区域/节点，通过从该区域的所有体素播种来执行概率脑束成像。**
**对于每个体素，对5000根纤维进行了采样。**
**为此，调用了FSL的protrackx命令。**
**从种子区域到另一个区域的连通概率定义为通过区域的光纤数除以从区域采样的光纤总数。**
**通过对所有节点重复该过程，可以计算出每个节点到脑网络内其他节点的连通概率。**
**这导致了一个特定于个体的加权矩阵，它的行和列表示大脑节点，其元素表示节点之间的连接概率。**
该矩阵还可以直接用于各种网络分析。PIPELINESPSOM的实现是一个灵活的框架，用于以Octave或MatLab脚本的形式实现流水线(Bellec等人，2012)，并在我们的研究中用于建立处理流水线。
这里，管道指的是一组作业，这些作业具有一组使用文件进行输入和输出的明确选项。熊猫的整个处理流程包括41个步骤，每个步骤都是熊猫管道中的一个作业。
值得注意的是，如果包含新的功能或处理步骤，则可以添加更多步骤。
当前PANDA流水线的工作流程显示了所有作业及其相关依赖项，如附录A所示。特别是，PANDA的设计允许作业在具有多核的单台计算机上或在计算集群上并行运行。
值得注意的是，熊猫的处理步骤可以在多个层面上并行化。
例如，一组受试者的相同处理步骤(即，前处理)可以被并行化，因为这些步骤在不同受试者之间是独立的。此外，对于同一受试者，不同的加工步骤也可以并行化，不同的加工步骤不存在相互依赖，例如产生扩散图和大脑分割。
最后，一些非常耗时的步骤(即BedpostXandProBabilistic Tractograph和Network Construction)已经在内部实现了并行化。
PANDA中的并行化策略被演示



![截屏2022-09-20 09.41.59](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-09-20 09.41.59.png)



**图3|PANDA的图解并行策略。例如，阶段1中的前处理步骤可以跨主题并行。阶段2和阶段3中同一主题或跨主题的独立处理步骤也可以并行化。**
**此外，BedpostX和概率网络建设已在内部并行化，如橙色框所示。**

**B=1000s/mm2，1幅图像无扩散加权(即b=0s/mm2)；4次重复采集；采集矩阵，128×124；视野(FOV)，256×248 mm2；分辨率，2×2×2 mm。**
采用三维磁化快速梯度回波(MP-RAGE)序列获得高分辨率的三维T1加权图像，其参数如下：层厚1 mm无间隙；矢状层厚176层；TR1900ms；TE 3.44ms；翻转角度9◦；采集矩阵256×256；FOV 256×256mm2；分辨率1×1×1 mm。
在每个管道步骤中，选择默认参数。网络拓扑图理论方法已被应用于表征从神经成像数据中得出的大脑网络的拓扑(Bullmore和Sporns，2009)。
在这里，我们关注两个拓扑网络参数：全局效率和局部效率。
全局效率被定义为特征路径长度的“调和平均值”的倒数的平均值，其代表网络内的全局信息传递能力(Latora和Marchiori，2001)。
局部效率量化网络的容错能力，与节点邻居之间的信息流效率相对应。具体而言，局部效率被定义为节点局部效率的平均值，该平均值被计算为其最近邻居组成的子图的全局效率(Latora和Marchiori，2001)。统计分析扩散度量，我们测试了整个WM的FA组差异。
具体地说，基于体素的分析采用了熊猫制作的归一化和平滑(6 mm高斯核)FA图像。
将性别作为协变量的一般线性模型(GLM)应用于每个WM体素，对多重比较校正采用错误发现率(FDR)，P<0.01



结果开发了一个名为PANDA的集成工具箱，用于dMRI数据集的全自动处理，该工具箱是一个开源的软件包，可从http://www.nitrc.org/projects/panda.免费获得。
熊猫在线论坛(http://www.nitrc.org/forum/forum.php?forumid=2731)andamail-ing List(http://www.nitrc.org/mailman/listinfo/panda-commits)have已经注册，开发者将不断提供技术支持和更新。
值得注意的是，Panda已经与PSOM、MRIcron和DiffusionToolkit打包在一起。
只需要单独安装FSL，Panda包括一个主功能和一组辅助模块/实用程序。
使用Main函数，Panda可以在将原始dMRI数据集加载到程序中后，为任意数量的主题运行管道处理。
这种运行模式将搜索所有处理步骤，并最终得到“材料和方法”中描述的所有输出。
相比之下，这些实用程序可以单独用于特定的处理步骤(例如，DICOM转换、TBS和脑部分割)。
特别是，熊猫有一个非常友好的图形用户界面(图4)，用户可以使用它与嵌入式功能进行各种交互，例如设置输入或输出和配置处理参数。
此外，Panda还可以实时提供正在进行的管道处理的状态，允许用户通过图形用户界面监控进度。
PSOM(Bellec et al.，2012)提供了**PANDA的一些优点：(1)它可以在一台多核的单台计算机上并行运行作业，也可以在一个计算集群中并行运行；(2)它可以生成日志文件并跟踪流水线的执行情况；(3)如果程序在结束之前终止，用户可以加载一个配置文件，点击“运行”，PANDA将从终止点重新启动；(4)如果用户在更改某些选项后重新运行管道，Panda只会重新启动与这些选项相关的程序；**
和(5)作业将运行“runinthebackgroundandPANDA&MATLABcanbeclosedafterclicking”按钮

对于每个受试者，从PANDA产生的FA加权矩阵被选择用于拓扑分析。
每个矩阵为78×78，代表大脑皮层的WM网络。
基质的每一行或每列代表AAL模板的一个皮质区域(Gong等人，2009a，b)。
然后计算了全局效率和局部效率。
为了检验群体效应对全局效率和局部效率的影响，使用了以性别和脑大小为协变量的广义线性模型，并选择p<0.05作为显著水平。结果集成了MATLAB工具箱：PANDA，开发了一个用于全自动处理dMRI数据集的集成工具箱PANDA

图4|熊猫图形用户界面快照。
(A)用于加载数据集和监视作业状态的主图形用户界面。(B)用于启动单独实用程序的图形用户界面![截屏2022-09-20 10.04.45](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-09-20 10.04.45.png)





PANDA的结果文件对于每个主题，Panda生成六个包含结果文件的文件夹，如表1所示。具体地说，enative_spaceFolders由原生空间中的所有图像和文件组成。
QUALITY_CONTROL文件夹中的文件包括FA、T1、归一化FA和归一化T1的2D快照图片，可以快速查看这些图片以检查数据和相关注册的质量(图5)。
已准备好进行统计分析的所有扩散度量文件都存储在名为Standard_space的文件夹中。**Retackviss文件夹由用于确定性声道成像的“扩散工具包”生成的结果文件组成，可用Trackvis打开。**
**Thenative_space.bedpostx文件夹包含FSL概率跟踪摄影所需的bedpostX的结果文件。**
**最后，将含有不同权重(即光纤数量、平均FA、平均长度和连通概率)的网络矩阵存储在名为NETWORE的文件夹中。TIME COST为了提供关于PANDA程序的时间成本的信息，进行了几个基线运行时间测试。具体地，在四种条件下(数据集I：64个方向，4次重复采集，分辨率：2×2×2 mm；数据集II：30个方向，2次重复采集，分辨率：2.2×2.2×2.2 mm)测试了两个不同采集方案的dMRI数据集。**
**有八个核心的两个对象)。**
**结果如表2所示。显然，运行时间取决于dMRI扫描方案。**
**更多的DWI方向和更多的重复获取将导致前处理和Bed-PostX的运行时间更长。**
**我们的结果进一步证明，由PANDA生成的运行时间表1|文件夹文件本地文件本地空间文件和背景的文本文件DWI、b0、脑掩膜、FA、MD、AD、RD和分割的本地空间图像QUALITY_CONTROL原始FA、本地T1、归一化FA和归一化T1标准空间的快照图像FA、MD、AD和RD(准备好进行基于体素的分析)区域FA、MD、AD和RD(已做好基于ROI分析的准备)图像的归一化图像。**
**和RD(准备好进行tbss分析)TrackvisTrackvis相关结果文件(用于deterministictractography)native_spacebedpostxBedpostX-related结果文件(用于概率束成像)网络由于并行处理，可以有效地保存熊猫中具有多个核心的多个对象的包含网络矩阵的网络矩阵的MATLAB文件，所述网络矩阵由纤维数量、平均FA、平均长度(来自确定性束图)和连接概率(来自概率束图)加权)。**
例如，完成两个对象的前处理步骤的成本几乎与一个对象的时间相同(表2)





此外，由于Bed Post X已在内部并行化，因此完成8核的Bed Post X所需时间仅为4核的一半(表2)。使用PANDA进行年龄对WM连接的影响正如预期的那样，基于体素的比较显示，在老年组中，FA值分布在整个大脑中(p<0.01，FDR校正)。
具体来说，FA主要受累于双侧上纵束、钩状束、内囊、外囊、穹隆和胼胝体(图6)。此外，我们还观察到大脑皮层WM网络拓扑效应的组间差异。
如图7所示，在控制了性别和脑大小后，WM网络的全局效率在老年组中显著降低(p=0.03)，而局部效率仅呈现下降趋势(p=0.16)。讨论在本研究中，我们开发了一个名为PANDA的综合处理dMRI数据集的MATLAB工具箱。
**PANDA的主要优势是它完全自动化了任意数量受试者的dMRI数据集的所有处理步骤。PANDA可以生成扩散度量数据，这些数据可用于三个水平(体素级别、图谱级别和TBSS级别)的统计分析，并可以使用确定性或概率扩散图生成整个大脑的解剖网络/矩阵。图5|用于FA标准化质量控制的快照图片。归一化FA覆盖了来自FA模板的图像边缘。**
这些图片可以快速查看，以检查正常化的质量。

![截屏2022-09-20 11.17.38](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-09-20 11.17.38.png)



该处理是使用具有30 GB内存和Intel Xeon E5649 2.53 GHz核心的本地工作站执行的。
测试了四种情况：一名受试者有四个核心；两名受试者有四个核心；一个受试者有八个核心；两个受试者有八个核心

统计图显示老年组FA显著降低(p<0.01，FDR校正)，热色代表年龄效应的数值。

全自动化的管道自然会使数据处理变得高效，同时通过避免手动处理个别步骤来减少潜在的错误。
虽然使用MIPAV(McAuliffe等人，2001)、JIST(Lucas等人，2010)、Nipype(GorGolewski等人，2011)或LONI(Dinov等人，2009)构建adMRI处理流水线是可能的，但它需要与这些包相关的流水线设计和编程技能的先前知识。
此外，还需要了解处理dMRI数据集的所有步骤的细节，这可能是终端用户面临的另一个挑战。
为了给终端用户提供一个现成的管道工具，开发了PANDA，使其能够利用已建立的管道立即处理dMRI数据集。值得注意的是，现有的dMRI包之间的处理程序存在差异，一些重要的处理步骤可能被忽略(Jones等人，2012年)。
这些问题已经在最近的几篇文章中得到了很好的讨论(Jones和Cercignani，2010；Jones等人，2012)。
熊猫的加工流水线试图尽可能地遵循最佳做法。例如，在涡流校正之后对扩散梯度方向的调整，这一点经常被遗漏(Leemans和Jones，2009；Jones等人，2012年)，已被包括在熊猫流水线中。
在未来的版本中，Panda将不断更新，以包括目前最佳实践的处理步骤

![截屏2022-09-20 11.20.23](/Users/haozhipeng/Library/Application Support/typora-user-images/截屏2022-09-20 11.20.23.png)

图7网络效率的组比较。旧组显示全局效率显著降低，局部效率有降低的趋势

 **Panda的另一个优势是同时支持顺序和并行处理模式，这使得充分利用可用的计算资源成为可能。**
并行环境可以是具有多个核心的单台计算机，也可以是越来越多地进入世界各地实验室的计算集群。
如图3所示，PANDA的处理被尽可能地并行化，从而可以在并行处理模式下大幅降低时间成本。例如，预处理两个主题isalmostthesameasforonesubjectbyusingaworkstationwithfour核的运行时间。最后，PANDA具有非常友好的图形用户界面(图4)，允许高级用户为每个处理步骤选择所需的选项。
根据数据集的不同，用户可能会更改某些处理步骤的选项，以优化处理质量。
参考数据，例如用于归一化的图像模板或用于节点定义的优先图，也可以被定制的数据取代，从而使得处理非人类(例如灵长类)大脑的dMRI数据成为可能。在本研究中，我们使用PANDA来产生结果，用于测试年龄对WM扩散指标的影响以及WM网络的拓扑学特性。
在衰老过程中，在双侧钩状束、上纵束、外囊、穹隆和胼胝体中发现了显著的FA减少，这与先前的发现高度一致(Bennett等人，2010；MichiElse等人，2010)。
此外，在老年组中观察到全局效率显著降低和局部效率降低的趋势。
这些拓扑变化与我们之前基于更大数据集的结果基本一致(Gong等人，2009b)。
在正常衰老过程中，WM连接性和拓扑性的下降可能是认知衰退的各种模式的基础。
本研究的结果证明了PANDA加工的可用性和有效性。PANDA在连接性神经科学领域具有很大的适用性。
例如，该工具可以应用于为研究各种连通性假设而收集的dMRI数据集。
此外，使用PANDA可以很容易地测试dMRI处理参数或步长对最终连接结果的影响。
最近，“连接组”一词被提出，以倡导对脑连接和网络进行全面的绘图和分析(Sporns等人，2005年)，dMRI已被作为结构性宏观连接组的主要技术(Behrens和Sporns，2012)。
这将在可预见的未来导致大量的dMRI数据集(http://humanconnectome.org/).。
在处理这些连接组数据集时，Panda具有独特的优势，因为它的并行化策略可以非常有效地处理大量的数据集，同时它可以自动为连接组研究提供重要的感兴趣的度量(例如，脑连接的扩散度量和脑网络矩阵)。
因此，Pandacan有可能在不久的将来为人类连接组的研究做出贡献。综上所述，Pandacan可以在很大程度上促进/简化dMRI相关研究中的图像处理，并可以为WM连接和网络分析提供手段。
它有一个可扩展的设计框架，并且可以并将在未来添加新的功能或实用程序。ACKNOWLEDGMENTS作者衷心感谢所有FSL、PSOM、扩散工具包和MRIcron的开发人员，他们的函数被PANDA调用。
此外，作者感谢Pierre Bellec博士在对熊猫实施PSOM时给予的支持，并感谢毕燕超博士的英文编辑。
本工作得到了国家自然科学基金项目(31000499,81271649,81030028)、北京新星计划(No.。
Z121110002512032)、973计划(项目编号：2013CB837300)、认知神经科学与学习国家重点实验室开放研究基金。