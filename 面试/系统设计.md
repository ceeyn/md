

### çŸ­é“¾æ¥ç³»ç»Ÿ

https://xie.infoq.cn/article/7e4023d2080d676addbe0e2b0?utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search



<img src="/Users/moon/Library/Application Support/typora-user-images/æˆªå±2024-09-27 21.55.57.png" alt="æˆªå±2024-09-27 21.55.57" style="zoom:50%;" />



## å…¨å±€å”¯ä¸€id

## Snowflake ID çš„ç»“æ„ï¼ˆ64 ä½æ•´æ•°ï¼‰

```
plaintext


å¤åˆ¶ç¼–è¾‘
1bit   |   41bits     | 10bits     | 12bits
ç¬¦å·ä½ | æ—¶é—´æˆ³éƒ¨åˆ†   | æœºå™¨æ ‡è¯†   | åºåˆ—å·
```

æ€»å…± 64 ä½ï¼ˆJava `long` ç±»å‹ï¼‰ï¼Œå„éƒ¨åˆ†è¯¦è§£å¦‚ä¸‹ï¼š

| éƒ¨åˆ†     | ä½æ•° | ä½œç”¨                                             |
| -------- | ---- | ------------------------------------------------ |
| ç¬¦å·ä½   | 1    | æ’ä¸º 0ï¼ˆLong çš„æœ€é«˜ä½ï¼Œæ­£æ•°ï¼‰                    |
| æ—¶é—´æˆ³   | 41   | å½“å‰æ—¶é—´æˆ³ï¼ˆç›¸å¯¹äºæŸä¸ªèµ·å§‹æ—¶é—´ï¼‰ï¼Œå•ä½ï¼šæ¯«ç§’     |
| æœºå™¨æ ‡è¯† | 10   | å”¯ä¸€æ ‡è¯†æŸä¸ªç”ŸæˆèŠ‚ç‚¹ï¼ˆå¦‚æœºæˆ¿ + æœºå™¨å·ï¼‰          |
| åºåˆ—å·   | 12   | åŒä¸€æ¯«ç§’å†…è‡ªå¢çš„è®¡æ•°å™¨ï¼ˆæœ€å¤šæ”¯æŒ 4096 ä¸ª ID/msï¼‰ |

### æœ¬åœ°æ—¶é’Ÿé”™è¯¯ï¼šå¼•å…¥é€»è¾‘æ—¶é’Ÿï¼ˆLogical Clockï¼‰+ ç‰ˆæœ¬å·

> ç±»ä¼¼ç™¾åº¦çš„ UIDGeneratorã€æ»´æ»´çš„ TinyId ä¼šé‡‡ç”¨è¿™ä¸ªæ–¹æ³•

#### ğŸ“Œ åšæ³•ï¼š

åœ¨æ—¶é—´æˆ³å‰é¢åŠ ä¸€ä¸ªâ€œé€»è¾‘ç‰ˆæœ¬å·â€æˆ–â€œä¸šåŠ¡å‘¨æœŸå·â€ï¼š

```
plaintext


å¤åˆ¶ç¼–è¾‘
| 7ä½é€»è¾‘æ—¶é’Ÿ | 28ä½æ—¶é—´æˆ³ | 10ä½æœºå™¨å· | 17ä½åºåˆ—å· |
```

- å½“æ£€æµ‹åˆ°ç³»ç»Ÿæ—¶é’Ÿå›æ‹¨ï¼Œ**é€»è¾‘æ—¶é’Ÿï¼ˆepochï¼‰+1**ï¼Œæ—¶é—´æˆ³éƒ¨åˆ†å½’ 0
- å³ä½¿æ—¶é—´å˜å°ï¼Œä¹Ÿèƒ½ä¿è¯æœ€ç»ˆ ID ä»é€’å¢ã€å”¯ä¸€

#### âœ… ä¼˜ç‚¹ï¼š

- èƒ½å®‰å…¨å®¹å¿æ—¶é’Ÿå›æ‹¨
- ä¸é˜»å¡ä¸šåŠ¡ï¼ˆé€»è¾‘æ—¶é’Ÿåªåœ¨å›æ‹¨æ—¶è·³ä¸€æ¬¡ï¼‰

#### âŒ ç¼ºç‚¹ï¼š

- å®ç°å¤æ‚
- ID ç»“æ„ä¸å…¼å®¹ä¼ ç»Ÿ Snowflake





# æŠ¢çº¢åŒ…

https://blog.csdn.net/xiaofeng10330111/article/details/130191645?ops_request_misc=%257B%2522request%255Fid%2522%253A%25226B983A95-DA90-4287-9708-B8B47A07BC2C%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=6B983A95-DA90-4287-9708-B8B47A07BC2C&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~hot_rank-3-130191645-null-null.142^v100^pc_search_result_base8&utm_term=çº¢åŒ…ç³»ç»Ÿ&spm=1018.2226.3001.4187

<img src="/Users/moon/Library/Application Support/typora-user-images/image-20241007122244309.png" alt="image-20241007122244309" style="zoom:50%;" />

## æœåŠ¡setåŒ–



<img src="/Users/moon/Library/Application Support/typora-user-images/image-20241007122443706.png" alt="image-20241007122443706" style="zoom:50%;" />
