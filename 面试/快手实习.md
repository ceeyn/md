

task: 评测平台评测词条多人乱序领取，词条是搜索的一些数据，例如 sug 词，猜搜词等，原来是顺序领取，现在要为了防止多个人评测作弊改成乱序，顺序的时候：每个人领取的时候，首先对任务加分布式锁，会去数据库按照已领取、 已暂停、未领取的顺序领取一个，如果数据库中没有，则会去 redis 中查，redis 缓存了当前任务可评的词条 id，上限 7 天，每次领取一条，按照参与评测的人数插入 n 条到数据库中，假如下一次就可以从数据库中拿。

现在的话，每次一下从 redis 中领取 10 条，kconf 可配置，插入 n * 10 条到数据库中，后面每次来的时候从数据库中领取

result：接口平均耗时从 1s 下降到 700ms 



Task：评测平台导出优化，原来导出是同步，如果导出的文件特别大，会让操作者觉得没反应，体感不好。现在改成异步导出，点击接口的时候直接返回成功，使用 completablefuture 异步生成 excel 以后改成放入快手的blobstore，存一些大的二进制文件、图像，而不是原来放在磁盘中，然后会使用快手的通讯软件发消息，导出成功还是失败，用户点击链接后跳到一个页面发起请求进行下载。



Task: 快手的猜搜和历史词不同的人群习惯是不一样的，有的更喜欢猜搜多一点，有的更喜欢历史词多一点，原来是直接端上默认的 3 行、4 行，现在改成根据不同的用户习惯设置不同的猜搜历史词行数，刚开始 ab 实验做出来有收益，后来调用下游算法返回的结果，因为搜索可能很多场景都会显示行数，所以使用本地缓存将行数缓存下来



task：